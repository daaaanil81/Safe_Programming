Петров Д.М. КИТ-М120Б
Лабораторна робота № 5
Геш дерева
===================

Мета: Ознайомитись з технологією MerkleTree
===================

Завдання: Створити екосистему (та продемонструвати її роботу), що складається з наступних компонентів:
*	сервер. Має інформацію о файлах мережі у наступному вигляді: 
*	merkle root
*	Перелік клієнтів, що мають хоча б частину контенту файлу та перелік блоків, які вони мають
*	клієнт, що має хоча б частину контенту файлу. Дії, що можна проводити над клієнтом:
*	запитати частину файла. На вхід подається merkle root цого файлу, індекс блоку. На вихід дається контент файлу або помилка, якщо такого блоку немає
*	виконати верифікацію блока. На вхід подається merkle root, block hash. На вихід подається обрізане під-дерево (гілку до запитаного геша) стосовно алгоритму. Якщо block hash відсутній або невалідний - повертаєтсья стосовна помилка. 
*	клієнт, що завантажує файл. Послідовність дій, що виконується:
*	отримує будь-яким чином merkle root бажаного для завантажування файлу
*	виконує завантаження блоку:
*	питає у сервера перелік клієнтів, що має певну частину цього файлу. 
*	завантажує блок
*	виконує верифікацію блоку:
	виконує гешування блоку
*	обирає будь-який іннший сервер, що має цей блок та питає його частину merkle дерева. Якщо інший сервером нема, питаємо у того, з якого завантажували
*	самостійно проводить верифікацію гілки дерева 
*	якщо усе добре - зберігає блок, оновлює внутрішню базу даних, посилає запит на сервер для додання зпису, що даний клієт має блок з тиким індексом для певного файлу (merkle root)

Хід роботи
===================
Дерево Меркла (геш-дерево, tiger tree tashing, англ. Merkle tree) представляє собою особливу структуру даних, яка містить підсумкову інформацію про якийсь більший обсяг даних. Використовується для перевірки цілісності даних.
Дані поділяються на малі частини (блоки), які індивідуально гешуються за допомогою Leaf Tiger Hash, потім з кожної пари гешів по черзі обчислюється Internal Tiger Hash. Якщо до гешу немає пари, то він переноситься в новий ланцюжок без змін. Далі в ланцюжку для кожної пари знову обчислюється Internal Tiger Hash. Ця процедура повторюється до тих пір, поки не залишиться один геш. Цей один геш, що залишився, називають Tiger Tree Root. Саме його використовують для однозначної ідентифікації файлу і вказують у різних P2P посиланнях.
 

Геш-дерева використовуються для перевірки даних, що зберігаються, обробляються та передаються в комп'ютерах та між ними. Забезпечують перевірку на цілісність та достовірність даних та окремих блоків, що передаються між вузлами peer-to-peer мережі. Геш-дерева застосовуються в системах trusted computing. Геш-дерева також використовуються в геш-криптографії.
Геш-дерева використовуються у файлових системах IPFS, Btrfs та ZFS для протидії Деградації даних, програмі розповсюдженя даних Dat, протоколі Google Wave, розподіленій системи керування версіями Git та Mercurial, резервній системі Tahoe-LAFS , однорангових мережах Bitcoin та Ethereum, фреймворку прозорості сертифікатів, системах Riak та Dynamo.
Початкова реалізація дерева Меркла у Bitcoin від Сатосі Накамото застосовує крок стиснення геш-функції до надмірного рівня, що полегшує використання дерев типу Fast Merkle.

Було розроблено дві програми, клієнт та сервер. 
Сервер, як описано в завданні, зберігає геш значення merkle root файлу, для того, щоб була можливість перевірити який файл потребує клієнт. Сервер зберігає інформацію о клієнтах, які мають хоча б якусь частину файлу.
Клієнт зберігає в пам’яті частину файлу та запитує у сервера інформацію о клієнтах які мають частини файлів яких в нього немає. Отримавши інформацію, клієнт запитує у клієнта частину файлу та одночасно приймає запити на відправку частин файлу які в нього вже є. 
	 
Висновок:
	Ознайомився з технологією MerkleTree. Створив екосистему (та продемонстрував її роботу), що складається з наступних компонентів: сервера та клієнтів.

